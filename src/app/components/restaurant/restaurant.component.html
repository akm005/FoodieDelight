<p-toast />
<div class="container w-full flex justify-center">
    <form
        class="flex flex-col justify-center md:mx-20 m-2 p-6 bg-gradient-to-br from-yellow-100 to-orange-100"
        [formGroup]="form" (ngSubmit)="onSubmit()">
        <div *ngIf="isInvalid" class="p-2 text-xs text-red-500 self-center">Details not valid please check again</div>
        <div class=" p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="name">Name of Restaurant<span class="ml-1 text-sm text-red-500">*</span></label>
            <input class="col-span-2 p-2" placeholder="Your Name" type="text" pInputText formControlName="name" />
            <div *ngIf="control.name.touched && control.name.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control.name.errors?.required">Name is required.</small>
                <small *ngIcontrol="control.name.errors?.minlength">
                    Name must be at least 3 characters long.
                </small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="description">Description<span class="ml-1 text-sm text-red-500">*</span></label>
            <input class="col-span-2 p-2" placeholder="Hotel Description" type="text" pInputText formControlName="description" />
            <div *ngIf="control.description.touched && control.description.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.description?.errors?.required">Description is required.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="email">Email<span class="ml-1 text-sm text-red-500">*</span></label>
            <input class="col-span-2 p-2" type="text" placeholder="youremail@resto.com" pInputText formControlName="email" />
            <div *ngIf="control.email.touched && control.email.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.email?.errors?.required">Email is required.</small>
                <small *ngIf="control?.email?.errors?.email">
                    Email is not Valid.
                </small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="contact">Contact<span class="ml-1 text-sm text-red-500">*</span></label>
            <p-inputMask class="col-span-2" styleClass="w-full max-w-full" mask="999-9999-999" formControlName="contact"
                placeholder="999-9999-999" />
            <div *ngIf="control.contact.touched && control.contact.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.contact?.errors?.required">Contact is required.</small>
                <small *ngIf="control?.contact?.errors?.pattern">Contact not Valid.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="address">Address<span class="ml-1 text-sm text-red-500">*</span></label>
            <input class="col-span-2 p-2" type="text" placeholder="63,New Street 4" pInputText formControlName="address" />
            <div *ngIf="control.address.touched && control.address.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.address?.errors?.required">Address is required.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="city">City<span class="ml-1 text-sm text-red-500">*</span></label>
            <input class="col-span-2 p-2" type="text" placeholder="New York" pInputText formControlName="city" />
            <div *ngIf="control.city.touched && control.city.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.city?.errors?.required">City is required.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="state">State<span class="ml-1 text-sm text-red-500">*</span></label>
            <input class="col-span-2 p-2" type="text" pInputText placeholder="New York State" formControlName="state" />
            <div *ngIf="control.state.touched && control.state.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.state?.errors?.required">State is required.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="zip">Pincode<span class="ml-1 text-sm text-red-500">*</span></label>
            <!-- <input class="col-span-2 p-2" type="number" maxlength="6" minlength="6" pInputText formControlName="zip" /> -->
            <p-inputMask class="col-span-2" styleClass="w-full max-w-full" mask="999999" formControlName="zip"
                placeholder="999999" />
            <div *ngIf="control.zip.touched && control.zip.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.zip?.errors?.required">Pincode is required.</small>
                <small *ngIf="control?.zip?.errors?.pattern">Pincode not Valid.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="tags">Tags</label>
            <p-chips class="col-span-2" formControlName="tags" placeholder="Ambient" styleClass="w-full max-w-full" />
            <!-- <div *ngIf="control.tags.touched && control.tags.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.tags?.errors?.required">At least one Tags is required.</small>
            </div> -->
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="active">Active Status<span class="ml-1 text-sm text-red-500">*</span></label>
            <p-checkbox formControlName="active" [binary]="true" inputId="binary" class="ng-invalid ng-dirty" />
            <div *ngIf="control.active.touched && control.active.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.active?.errors?.required">Status is required.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="rating">Rating</label>
            <p-rating class="col-span-2" formControlName="rating" />
            <!-- <div *ngIf="control.rating.touched && control.rating.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.rating?.errors?.required">Rating is required.</small>
            </div> -->
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="type">Type<span class="ml-1 text-sm text-red-500">*</span></label>
            <p-dropdown class="col-span-2" styleClass="max-w-full" placeholder="VEG" formControlName="type" [options]="types"
                optionLabel="name" optionValue="code" placeholder="Type of Restaurant" />
            <div *ngIf="control.type.touched && control.type.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.type?.errors?.required">Type is required.</small>
                <small *ngIf="control?.type?.errors?.pattern">Type is not Valid.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="open">Opening Time<span class="ml-1 text-sm text-red-500">*</span></label>
            <p-calendar class="col-span-2" styleClass="w-full max-w-full" inputId="open" placeholder="09:00 AM" formControlName="open"
                [hourFormat]="'12'" [timeOnly]="true" />
            <div *ngIf="control.open.touched && control.open.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.open?.errors?.required">Opening time is required.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="close">closing Time<span class="ml-1 text-sm text-red-500">*</span></label>
            <p-calendar class="col-span-2" styleClass="w-full max-w-full" inputId="close" placeholder="09:00 PM" formControlName="close"
                [hourFormat]="'12'" [timeOnly]="true" />
            <div *ngIf="control.close.touched && control.close.invalid"
                class="error text-red-500 col-start-2 col-span-2 flex flex-row justify-center">
                <small *ngIf="control?.close?.errors?.required">Closeing time is required.</small>
            </div>
        </div>
        <div class="p-2 grid grid-cols-3 gap-x-4 gap-y-1 items-center">
            <label class="" for="image">Upload Image<span class="ml-1 text-sm text-red-500">*</span></label>
            <p-fileUpload class="col-start-2 col-span-2" name="myfile[]" url="https://www.primefaces.org/cdn/api/upload.php"
                [multiple]="true" accept="image/*" maxFileSize="1000000" (onUpload)="onTemplatedUpload()"
                (onSelect)="onSelectedFiles($event)">
                <ng-template pTemplate="header" let-files let-chooseCallback="chooseCallback"
                    let-clearCallback="clearCallback" let-uploadCallback="uploadCallback">
                    <div class="flex flex-wrap justify-between items-center flex-1 gap-2">
                        <div class="flex gap-2">
                            <p-button (onClick)="choose($event, chooseCallback)" icon="pi pi-images" [rounded]="true"
                                [outlined]="true" />
                            <p-button (onClick)="uploadEvent(uploadCallback)" icon="pi pi-cloud-upload" [rounded]="true"
                                [outlined]="true" severity="success" [disabled]="!files || files.length === 0" />
                            <p-button (onClick)="clearCallback()" icon="pi pi-times" [rounded]="true" [outlined]="true"
                                severity="danger" [disabled]="!files || files.length === 0" />
                        </div>
                        <p-progressBar [value]="totalSizePercent" [showValue]="false"
                            styleClass="md:w-20rem h-1rem w-full md:ml-auto"
                            [ngClass]="{ 'exceeded-progress-bar': totalSizePercent > 100 }">
                            <span class="white-space-nowrap">{{ totalSize }}B / 1Mb</span>
                        </p-progressBar>
                    </div>
                </ng-template>
                <ng-template pTemplate="content" let-files let-uploadedFiles="uploadedFiles"
                    let-removeFileCallback="removeFileCallback"
                    let-removeUploadedFileCallback="removeUploadedFileCallback">
                    <div *ngIf="files?.length > 0">
                        <h5>Pending</h5>
                        <div class="flex flex-wrap p-0 sm:p-5 gap-5">
                            <div *ngFor="let file of files; let i = index"
                                class="card m-0 px-6 flex flex-col border-1 surface-border items-center gap-3">
                                <div>
                                    <img role="presentation" [alt]="file.name" [src]="file.objectURL" width="100"
                                        height="50" />
                                </div>
                                <span class="font-semibold">{{ file.name }}</span>
                                <div>{{ formatSize(file.size) }}</div>
                                <p-badge value="Pending" severity="warning" />
                                <p-button icon="pi pi-times"
                                    (onClick)="onRemoveTemplatingFile($event, file, removeFileCallback, i)"
                                    [outlined]="true" [rounded]="true" severity="danger" />
                            </div>
                        </div>
                    </div>
                    <div *ngIf="uploadedFiles?.length > 0">
                        <h5>Completed</h5>
                        <div class="flex flex-wrap p-0 sm:p-5 gap-5">
                            <div *ngFor="let file of uploadedFiles; let i = index"
                                class="card m-0 px-6 flex flex-col border-1 surface-border items-center gap-3">
                                <div>
                                    <img role="presentation" [alt]="file.name" [src]="file.objectURL" width="100"
                                        height="50" />
                                </div>
                                <span class="font-semibold">{{ file.name }}</span>
                                <div>{{ formatSize(file.size) }}</div>
                                <p-badge value="Completed" class="mt-3" severity="success" />
                                <p-button icon="pi pi-times" (onClick)="removeUploadedFileCallback(i)" [outlined]="true"
                                    [rounded]="true" severity="danger" />
                            </div>
                        </div>
                    </div>
                </ng-template>
                <ng-template pTemplate="file"> </ng-template>
                <ng-template pTemplate="empty">
                    <div class="flex items-center justify-center flex-col">
                        <i class="pi pi-cloud-upload border-2 border-circle p-5 text-8xl text-400 border-400"></i>
                        <p class="mt-4 mb-0 ml-3">Drag and drop files to upload.</p>
                    </div>
                </ng-template>
            </p-fileUpload>
        </div>
        <div class="p-2 flex flex-row justify-center items-center gap-3">
            <p-button label="Submit" type="Submit" /> <p-button *ngIf="id" (click)="delete($event)" label="Delete"
                severity="danger" />
        </div>
    </form>
</div>